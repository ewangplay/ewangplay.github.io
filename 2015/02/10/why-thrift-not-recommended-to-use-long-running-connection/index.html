<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>为什么对于thrift不建议使用长连接 | 筒中窥猫</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="https://unpkg.com/normalize.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/pure-min.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="https://unpkg.com/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/rss+xml" href="/atom.xml"><script type="text/javascript" src="https://unpkg.com/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="https://unpkg.com/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="https://unpkg.com/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">为什么对于thrift不建议使用长连接</h1><a id="logo" href="/.">筒中窥猫</a><p class="description">学而时习之，不亦说乎？有朋自远方来，不亦乐乎？人不知而不愠，不亦君子乎？</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">为什么对于thrift不建议使用长连接</h1><div class="post-meta">2015-02-10<span> | </span><span class="category"><a href="/category/%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/">编程技术</a></span></div><div class="post-content"><p>我们后端的服务采用Micro-Service的架构，按照功能切分成各种细小的服务，对于每个服务不限制编程语言，比如我们的团队成员就使用了三种编程语言——golang、python、nodejs。服务与服务之间使用了Facebook开源的thrift通讯框架来做RPC调用，灵活、简单、功能上也基本满足了需求。关于thrift的使用，可以参考<a href="http://thrift.apache.org/">它的官网</a>。</p>
<p>前期为了使用简单，thrift调用的client端都是采用短连接的方式，每次调用API都创建了一个新的连接，调用完成后关闭这个连接。代码演示如下：</p>
<pre><code>    &#123;
        trans, err := thrift.NewTSocket(networkAddr)
        if err != nil &#123;
            return &quot;&quot;, err
        &#125;
        defer trans.Close()

        protocolFactory := thrift.NewTBinaryProtocolFactoryDefault()
        client := smssender.NewSMSSenderClientFactory(trans, protocolFactory)

        if err := trans.Open(); err != nil &#123;
            return &quot;&quot;, err
        &#125;

        r, err = client.SendMessage(request_id, serial_number, receiver, content, signature, service_number)
        if err != nil &#123;
            return &quot;&quot;, err
        &#125;
    &#125;
</code></pre>
<p>后来在重构这部分代码时，就想着能不能采用长连接的模式呢？原先这种每次调用API都新建连接的方式，是不是性能上太低效了呢？于是鼓捣鼓捣，就把前面新建连接、新建thrift协议、新建thrift客户端的部分提取成公用的，让直接调用API的代码瘦身。</p>
<p>理想很美好，现实很残酷！这样重构了之后，一些莫名其妙的问题就随之而来了。有时运行良好，有时出现莫名的错误。Oh！My God! 这是为何呀？</p>
<p>穷途末路之际，只有痛定思痛，下定决心，决定往根儿上刨一刨，也许会有意想不到的收获的。下面就是翻看thrift源码（Go语言版本）的过程，对应的源码在<a href="https://github.com/apache/thrift">Github</a>上可以找到。</p>
<p>针对Go语言版本的thrift库文件还是蛮多的，我查了一下，算上单元测试的文件有55个go文件，所以我并没有从头到尾把源码看一遍，也没这个必要，因为我是有目的性的查找问题，所以在大致浏览了一下工程的整体框架后，专注在一些重点的源码上即可。</p>
<p>首先我们先看一下在Server端thrift的典型用法：</p>
<pre><code>    func main() &#123;

        ......

        transportFactory := thrift.NewTBufferedTransportFactory(1024)
        protocolFactory := thrift.NewTBinaryProtocolFactoryDefault()
        serverTransport, err := thrift.NewTServerSocket(networkAddr)
        handler := &amp;SNSSchedulerImpl&#123;&#125;
        processor := snsscheduler.NewSNSSchedulerProcessor(handler)
        server := thrift.NewTSimpleServer4(processor, serverTransport, transportFactory, protocolFactory)

        server.Serve()
    &#125;
</code></pre>
<p>这里关键的几个步骤如下：</p>
<ol>
<li><p>创建一个TTransport对象工厂用来后续生成TTransport对象</p>
<pre><code> type Flusher interface &#123;
     Flush() (err error)
 &#125;

 // Encapsulates the I/O layer
 type TTransport interface &#123;
     io.ReadWriteCloser
     Flusher

     // Opens the transport for communication
     Open() error

     // Returns true if the transport is open
     IsOpen() bool
 &#125;
</code></pre>
<p> Transport层实际上提供了对网络Socket进行读&#x2F;写的一个抽象。</p>
<p> 对于Server端而言，在基础的Transport抽象层之上，又提供了一个针对服务端的抽象层：TServerTransport</p>
<pre><code> type TServerTransport interface &#123;
     Listen() error
     Accept() (TTransport, error)
     Close() error

     // Optional method implementation. This signals to the server transport
     // that it should break out of any accept() or listen() that it is currently
     // blocked on. This method, if implemented, MUST be thread safe, as it may
     // be called from a different thread context than the other TServerTransport
     // methods.
     Interrupt() error
 &#125;
</code></pre>
<p> 下面我们看到的TServerSocket实现，实际上就是对这个interface的实现。</p>
<pre><code> type TServerSocket struct &#123;
     listener      net.Listener
     addr          net.Addr
     clientTimeout time.Duration

     // Protects the interrupted value to make it thread safe.
     mu          sync.RWMutex
     interrupted bool
 &#125;

 func NewTServerSocket(listenAddr string) (*TServerSocket, error) &#123;
     return NewTServerSocketTimeout(listenAddr, 0)
 &#125;

 func NewTServerSocketTimeout(listenAddr string, clientTimeout time.Duration) (*TServerSocket, error) &#123;
     addr, err := net.ResolveTCPAddr(&quot;tcp&quot;, listenAddr)
     if err != nil &#123;
         return nil, err
     &#125;
     return &amp;TServerSocket&#123;addr: addr, clientTimeout: clientTimeout&#125;, nil
 &#125;

 func (p *TServerSocket) Listen() error &#123;
     if p.IsListening() &#123;
         return nil
     &#125;
     l, err := net.Listen(p.addr.Network(), p.addr.String())
     if err != nil &#123;
         return err
     &#125;
     p.listener = l
     return nil
 &#125;

 func (p *TServerSocket) Accept() (TTransport, error) &#123;
     p.mu.RLock()
     interrupted := p.interrupted
     p.mu.RUnlock()

     if interrupted &#123;
         return nil, errTransportInterrupted
     &#125;
     if p.listener == nil &#123;
         return nil, NewTTransportException(NOT_OPEN, &quot;No underlying server socket&quot;)
     &#125;
     conn, err := p.listener.Accept()
     if err != nil &#123;
         return nil, NewTTransportExceptionFromError(err)
     &#125;
     return NewTSocketFromConnTimeout(conn, p.clientTimeout), nil
 &#125;

 // Checks whether the socket is listening.
 func (p *TServerSocket) IsListening() bool &#123;
     return p.listener != nil
 &#125;

 // Connects the socket, creating a new socket object if necessary.
 func (p *TServerSocket) Open() error &#123;
     if p.IsListening() &#123;
         return NewTTransportException(ALREADY_OPEN, &quot;Server socket already open&quot;)
     &#125;
     if l, err := net.Listen(p.addr.Network(), p.addr.String()); err != nil &#123;
         return err
     &#125; else &#123;
         p.listener = l
     &#125;
     return nil
 &#125;

 func (p *TServerSocket) Addr() net.Addr &#123;
     if p.listener != nil &#123;
         return p.listener.Addr()
     &#125;
     return p.addr
 &#125;

 func (p *TServerSocket) Close() error &#123;
     defer func() &#123;
         p.listener = nil
     &#125;()
     if p.IsListening() &#123;
         return p.listener.Close()
     &#125;
     return nil
 &#125;

 func (p *TServerSocket) Interrupt() error &#123;
     p.mu.Lock()
     p.interrupted = true
     p.mu.Unlock()

     return nil
 &#125;
</code></pre>
</li>
<li><p>创建一个TProtocol对象工厂用来后续生成TProtocol对象</p>
<pre><code> type TProtocol interface &#123;
     WriteMessageBegin(name string, typeId TMessageType, seqid int32) error
     WriteMessageEnd() error
     WriteStructBegin(name string) error
     WriteStructEnd() error
     WriteFieldBegin(name string, typeId TType, id int16) error
     WriteFieldEnd() error
     WriteFieldStop() error
     WriteMapBegin(keyType TType, valueType TType, size int) error
     WriteMapEnd() error
     WriteListBegin(elemType TType, size int) error
     WriteListEnd() error
     WriteSetBegin(elemType TType, size int) error
     WriteSetEnd() error
     WriteBool(value bool) error
     WriteByte(value byte) error
     WriteI16(value int16) error
     WriteI32(value int32) error
     WriteI64(value int64) error
     WriteDouble(value float64) error
     WriteString(value string) error
     WriteBinary(value []byte) error

     ReadMessageBegin() (name string, typeId TMessageType, seqid int32, err error)
     ReadMessageEnd() error
     ReadStructBegin() (name string, err error)
     ReadStructEnd() error
     ReadFieldBegin() (name string, typeId TType, id int16, err error)
     ReadFieldEnd() error
     ReadMapBegin() (keyType TType, valueType TType, size int, err error)
     ReadMapEnd() error
     ReadListBegin() (elemType TType, size int, err error)
     ReadListEnd() error
     ReadSetBegin() (elemType TType, size int, err error)
     ReadSetEnd() error
     ReadBool() (value bool, err error)
     ReadByte() (value byte, err error)
     ReadI16() (value int16, err error)
     ReadI32() (value int32, err error)
     ReadI64() (value int64, err error)
     ReadDouble() (value float64, err error)
     ReadString() (value string, err error)
     ReadBinary() (value []byte, err error)

     Skip(fieldType TType) (err error)
     Flush() (err error)

     Transport() TTransport
 &#125;
</code></pre>
<p> TProtocol层实际上提供了对传输的各种数据类型的一个编码&#x2F;解码过程的封装，相当于对数据的序列化和反序列化过程。提供的协议格式有多种：json, xml, 纯文本，压缩二进制等。</p>
</li>
<li><p>创建一个自定义的跟业务相关的TProcessor对象</p>
<pre><code> type TProcessor interface &#123;
     Process(in, out TProtocol) (bool, TException)
 &#125;
</code></pre>
<p> TProcessor层实际上定义了一个处理框架，从Input TProtocol对象读取数据，委托给服务开发者实际编写的业务接口进行处理，然后把处理后的结果输出到Output TProtocol对象。Input TProtocol对象中的数据代表了服务API调用者传递过来的调用信息（一般而言就是调用API的名称和对应的参数），而输出到Output TProtocol对象的数据代表了服务API经过内部处理后返回的结果数据。</p>
<p> 对于thrift框架的使用者来说，实现自定义的TProcessor对象接口，就是要全部关注的内容，其它的通讯细节都被thrift封装了起来，对开发者来说是透明的。</p>
</li>
<li><p>创建一个Server对象把上面的对象模型整合到一起，进入工作流程；</p>
</li>
</ol>
<ul>
<li><p>创建一个TTransport对象</p>
</li>
<li><p>针对这个TTransport对象创建Input&#x2F;Output TProtocol对象</p>
</li>
<li><p>基于Input&#x2F;Output TProtocol对象创建一个业务相关的TProcessor对象</p>
</li>
<li><p>等待incomming的连接请求，并把传递给TProcessor对象进行处理</p>
<p>  我们看一下实际的源码流程：</p>
<pre><code>  func (p *TSimpleServer) Listen() error &#123;
      return p.serverTransport.Listen()
  &#125;

  func (p *TSimpleServer) AcceptLoop() error &#123;
      for &#123;
          client, err := p.serverTransport.Accept()
          if err != nil &#123;
              select &#123;
              case &lt;-p.quit:
                  return nil
              default:
              &#125;
              return err
          &#125;
          if client != nil &#123;
              go func() &#123;
                  if err := p.processRequests(client); err != nil &#123;
                      log.Println(&quot;error processing request:&quot;, err)
                  &#125;
              &#125;()
          &#125;
      &#125;
  &#125;

  func (p *TSimpleServer) Serve() error &#123;
      err := p.Listen()
      if err != nil &#123;
          return err
      &#125;
      p.AcceptLoop()
      return nil
  &#125;

  func (p *TSimpleServer) processRequests(client TTransport) error &#123;
      processor := p.processorFactory.GetProcessor(client)
      inputTransport := p.inputTransportFactory.GetTransport(client)
      outputTransport := p.outputTransportFactory.GetTransport(client)
      inputProtocol := p.inputProtocolFactory.GetProtocol(inputTransport)
      outputProtocol := p.outputProtocolFactory.GetProtocol(outputTransport)
      defer func() &#123;
          if e := recover(); e != nil &#123;
              log.Printf(&quot;panic in processor: %s: %s&quot;, e, debug.Stack())
          &#125;
      &#125;()
      if inputTransport != nil &#123;
          defer inputTransport.Close()
      &#125;
      if outputTransport != nil &#123;
          defer outputTransport.Close()
      &#125;
      for &#123;
          ok, err := processor.Process(inputProtocol, outputProtocol)
          if err, ok := err.(TTransportException); ok &amp;&amp; err.TypeId() == END_OF_FILE &#123;
              return nil
          &#125; else if err != nil &#123;
              log.Printf(&quot;error processing request: %s&quot;, err)
              return err
          &#125;
          if !ok &#123;
              break
          &#125;
      &#125;
      return nil
  &#125;
</code></pre>
</li>
</ul>
<p>从这段源码，我们已经可以分析的很清楚了，对于thrift的服务器端来说，启动Listen后，就进入一个循环等待thrift客户端连接请求的过程，一旦有客户端新的连接请求过来，就Accept这个连接请求，生成一个新的封装底层网络通讯的TTransport对象，然后把这个代表客户端请求的TTransport对象传递一个独立的goroutine来处理。在这个goroutine里面，又启动了一个for循环，循环里面就是调用了自定义的TProcessor-&gt;Process过程来处理本次的请求并返回结果。如果这次处理过程是正常的，即返回的两个状态值ok&#x3D;true并且err&#x3D;nil，那么这个循环继续，开始对下一次请求的处理；如果这次处理过程发生了异常，即返回的两个状态值ok&#x3D;false或者err!&#x3D;nil，那么这个循环就退出了，对应的底层连接也随之关闭。</p>
<p>所以，对于thrift客户端来说，采用短连接的模式来调用API，在使用上比较简单清晰，在程序的容错性上也比较好处理，如果对性能不是特别要求的话，还是建议使用短连接的模式。如果很在乎程序的性能，希望在性能上有高追求的话，也可以使用长连接的模式，但一定要处理好容错的问题，因为针对上面的分析，一旦本次API调用返回error，那么对应的连接就会被断开，如果在上面继续调用API就会报错，所以就需要添加重连机制，保证在之前连接被断开的情况下，重新建立连接。</p>
</div><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/Golang/" rel="tag">Golang</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/Thrift/" rel="tag">Thrift</a></li></ul></div><div class="post-nav"><a class="pre" href="/2015/02/12/%E5%8F%94%E6%9C%AC%E5%8D%8E%E7%9A%84%E3%80%8A%E8%AE%BA%E6%80%9D%E8%80%83%E3%80%8B%E8%AF%BB%E5%90%8E%E6%84%9F/">叔本华的《论思考》读后感</a><a class="next" href="/2015/02/05/panic-recover-exception-handle-in-golang/">Go语言中的异常处理机制</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="关于"><img class="nofancybox" src="/images/筒中窥猫.jpg"/></a><p>因上努力，果上随缘</p><a class="info-icon" href="https://weibo.com/ewangplay" title="Weibo" target="_blank" style="margin-inline:5px"> <i class="fa fa-twitter-square" style="margin-inline:5px"></i></a><a class="info-icon" href="mailto:ewangplay@qq.com" title="Email" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/ewangplay" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="/atom.xml" title="RSS" target="_blank" style="margin-inline:5px"> <i class="fa fa-rss-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/category/%E4%BA%BA%E7%94%9F%E8%AE%A1%E5%88%92/">人生计划</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E4%BA%BA%E7%94%9F%E9%9A%8F%E7%AC%94/">人生随笔</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E5%81%A5%E5%BA%B7%E7%AE%A1%E7%90%86/">健康管理</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E5%AE%B6%E5%BA%AD%E6%95%99%E8%82%B2/">家庭教育</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E5%B7%A5%E4%BD%9C%E6%80%9D%E8%80%83/">工作思考</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E5%BD%B1%E8%A7%86%E8%AF%84%E8%AE%BA/">影视评论</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E6%8A%80%E6%9C%AF%E8%AE%B0%E5%BD%95/">技术记录</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E6%95%8F%E6%8D%B7%E4%BA%BA%E7%94%9F/">敏捷人生</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91/">敏捷开发</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E6%9D%82%E9%A1%B9/">杂项</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/">架构设计</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E6%B8%B8%E8%AE%B0/">游记</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E7%A4%BE%E4%BC%9A%E8%A7%82%E5%AF%9F/">社会观察</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/">编程技术</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E8%AE%A4%E7%9F%A5%E7%A7%91%E5%AD%A6/">认知科学</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E8%AE%BA%E8%AF%AD/">论语</a></li><li class="category-list-item"><a class="category-list-link" href="/category/%E8%AF%BB%E4%B9%A6/">读书</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tag/%E8%AF%BB%E4%B9%A6%E5%8D%95/" style="font-size: 15px;">读书单</a> <a href="/tag/C/" style="font-size: 15px;">C++</a> <a href="/tag/FVWM/" style="font-size: 15px;">FVWM</a> <a href="/tag/Golang/" style="font-size: 15px;">Golang</a> <a href="/tag/%E5%B9%B6%E5%8F%91/" style="font-size: 15px;">并发</a> <a href="/tag/%E5%AD%A6%E8%BD%A6/" style="font-size: 15px;">学车</a> <a href="/tag/%E9%98%BF%E4%BC%A6%E6%A3%AE/" style="font-size: 15px;">阿伦森</a> <a href="/tag/%E7%A4%BE%E4%BC%9A%E5%BF%83%E7%90%86%E5%AD%A6/" style="font-size: 15px;">社会心理学</a> <a href="/tag/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 15px;">分布式</a> <a href="/tag/%E7%BC%96%E7%A8%8B%E9%81%93%E5%9C%BA/" style="font-size: 15px;">编程道场</a> <a href="/tag/%E4%BA%BA%E7%94%9F%E6%84%9F%E6%82%9F/" style="font-size: 15px;">人生感悟</a> <a href="/tag/fabric/" style="font-size: 15px;">fabric</a> <a href="/tag/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" style="font-size: 15px;">个人博客</a> <a href="/tag/Github/" style="font-size: 15px;">Github</a> <a href="/tag/%E6%B8%B8%E6%88%8F%E6%9C%BA%E5%88%B6/" style="font-size: 15px;">游戏机制</a> <a href="/tag/%E6%95%99%E8%82%B2/" style="font-size: 15px;">教育</a> <a href="/tag/%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">如何学习</a> <a href="/tag/%E6%9C%AB%E6%97%A5%E7%A9%B7%E9%80%94/" style="font-size: 15px;">末日穷途</a> <a href="/tag/%E7%94%9F%E6%B6%AF%E7%AE%A1%E7%90%86/" style="font-size: 15px;">生涯管理</a> <a href="/tag/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 15px;">微服务</a> <a href="/tag/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%AE%A2%E6%A0%88/" style="font-size: 15px;">程序员客栈</a> <a href="/tag/%E5%B0%91%E5%84%BF%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">少儿编程</a> <a href="/tag/scratch/" style="font-size: 15px;">scratch</a> <a href="/tag/%E7%9F%A5%E8%A1%8C%E5%90%88%E4%B8%80/" style="font-size: 15px;">知行合一</a> <a href="/tag/%E7%99%BE%E9%B8%9F%E6%9C%9D%E5%87%A4/" style="font-size: 15px;">百鸟朝凤</a> <a href="/tag/Thrift/" style="font-size: 15px;">Thrift</a> <a href="/tag/%E6%B8%B8%E6%B3%B3/" style="font-size: 15px;">游泳</a> <a href="/tag/%E5%A5%87%E7%89%B9%E7%9A%84%E4%B8%80%E7%94%9F/" style="font-size: 15px;">奇特的一生</a> <a href="/tag/%E5%AD%A6%E4%B9%A0%E4%B9%8B%E9%81%93/" style="font-size: 15px;">学习之道</a> <a href="/tag/%E6%88%91%E7%9A%84%E5%9B%A2%E9%95%BF%E6%88%91%E7%9A%84%E5%9B%A2/" style="font-size: 15px;">我的团长我的团</a> <a href="/tag/%E6%9E%AA%E7%82%AE%E7%97%85%E8%8F%8C%E4%B8%8E%E9%92%A2%E9%93%81/" style="font-size: 15px;">枪炮病菌与钢铁</a> <a href="/tag/%E7%AC%AC%E4%B8%89%E7%A7%8D%E9%BB%91%E7%8C%A9%E7%8C%A9/" style="font-size: 15px;">第三种黑猩猩</a> <a href="/tag/%E6%BA%90%E6%B3%89/" style="font-size: 15px;">源泉</a> <a href="/tag/%E5%B7%A8%E4%BA%BA%E7%9A%84%E9%99%A8%E8%90%BD/" style="font-size: 15px;">巨人的陨落</a> <a href="/tag/%E9%98%BF%E7%94%98%E6%AD%A3%E4%BC%A0/" style="font-size: 15px;">阿甘正传</a> <a href="/tag/%E5%8F%94%E6%9C%AC%E5%8D%8E/" style="font-size: 15px;">叔本华</a> <a href="/tag/%E8%AE%BA%E6%80%9D%E8%80%83/" style="font-size: 15px;">论思考</a> <a href="/tag/%E8%BE%85%E5%AF%BC%E4%BD%9C%E4%B8%9A/" style="font-size: 15px;">辅导作业</a> <a href="/tag/%E5%9F%83%E5%8D%9A%E6%8B%89/" style="font-size: 15px;">埃博拉</a> <a href="/tag/%E8%A1%80%E7%96%AB/" style="font-size: 15px;">血疫</a> <a href="/tag/%E6%9C%AA%E6%88%90%E5%B9%B4%E4%BA%BA%E7%8A%AF%E7%BD%AA/" style="font-size: 15px;">未成年人犯罪</a> <a href="/tag/%E5%A6%82%E4%BD%95%E6%80%9D%E8%80%83/" style="font-size: 15px;">如何思考</a> <a href="/tag/%E5%BF%AB%E6%97%B6%E4%BB%A3%E6%85%A2%E6%80%9D%E8%80%83/" style="font-size: 15px;">快时代慢思考</a> <a href="/tag/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" style="font-size: 15px;">年度总结</a> <a href="/tag/%E5%B9%B4%E5%BA%A6%E8%AE%A1%E5%88%92/" style="font-size: 15px;">年度计划</a> <a href="/tag/%E8%81%8C%E4%B8%9A%E7%94%9F%E6%B6%AF/" style="font-size: 15px;">职业生涯</a> <a href="/tag/%E5%A3%AB%E5%85%B5%E7%AA%81%E5%87%BB/" style="font-size: 15px;">士兵突击</a> <a href="/tag/%E6%8C%87%E7%8E%AF%E7%8E%8B/" style="font-size: 15px;">指环王</a> <a href="/tag/%E5%9B%B4%E5%9F%8E/" style="font-size: 15px;">围城</a> <a href="/tag/%E6%9E%81%E7%AE%80%E4%B8%BB%E4%B9%89/" style="font-size: 15px;">极简主义</a> <a href="/tag/%E5%B7%A5%E4%BD%9C%E7%8E%AF%E5%A2%83/" style="font-size: 15px;">工作环境</a> <a href="/tag/%E5%86%99%E7%BB%99%E5%AD%A9%E5%AD%90%E7%9A%84%E4%BF%A1/" style="font-size: 15px;">写给孩子的信</a> <a href="/tag/%E5%B7%A5%E4%BD%9C%E6%84%9F%E6%82%9F/" style="font-size: 15px;">工作感悟</a> <a href="/tag/%E8%B7%91%E6%AD%A5/" style="font-size: 15px;">跑步</a> <a href="/tag/%E7%BD%97%E8%BE%91%E6%80%9D%E7%BB%B4/" style="font-size: 15px;">罗辑思维</a> <a href="/tag/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/" style="font-size: 15px;">学习计划</a> <a href="/tag/%E5%AD%94%E5%AD%90/" style="font-size: 15px;">孔子</a> <a href="/tag/%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF/" style="font-size: 15px;">个人成长</a> <a href="/tag/%E5%80%9A%E5%A4%A9%E5%B1%A0%E9%BE%99%E8%AE%B0/" style="font-size: 15px;">倚天屠龙记</a> <a href="/tag/%E5%BC%A0%E6%97%A0%E5%BF%8C/" style="font-size: 15px;">张无忌</a> <a href="/tag/%E6%B8%B8%E8%AE%B0/" style="font-size: 15px;">游记</a> <a href="/tag/%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86/" style="font-size: 15px;">时间管理</a> <a href="/tag/%E5%8A%A0%E7%BC%AA/" style="font-size: 15px;">加缪</a> <a href="/tag/%E5%B1%80%E5%A4%96%E4%BA%BA/" style="font-size: 15px;">局外人</a> <a href="/tag/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/" style="font-size: 15px;">生活记录</a> <a href="/tag/%E6%AF%9B%E5%A7%86/" style="font-size: 15px;">毛姆</a> <a href="/tag/%E4%BA%BA%E6%80%A7%E7%9A%84%E6%9E%B7%E9%94%81/" style="font-size: 15px;">人性的枷锁</a> <a href="/tag/%E6%AF%8D%E4%BA%B2/" style="font-size: 15px;">母亲</a> <a href="/tag/%E6%98%A5%E5%A4%A9/" style="font-size: 15px;">春天</a> <a href="/tag/%E7%B2%BE%E5%8A%9B%E7%AE%A1%E7%90%86/" style="font-size: 15px;">精力管理</a> <a href="/tag/%E5%8D%A1%E6%8B%89%E9%A9%AC%E4%BD%90%E5%A4%AB%E5%85%84%E5%BC%9F/" style="font-size: 15px;">卡拉马佐夫兄弟</a> <a href="/tag/%E9%99%80%E6%80%9D%E5%A6%A5%E8%80%B6%E5%A4%AB%E6%96%AF%E5%9F%BA/" style="font-size: 15px;">陀思妥耶夫斯基</a> <a href="/tag/%E7%BD%AA%E4%B8%8E%E7%BD%9A/" style="font-size: 15px;">罪与罚</a> <a href="/tag/%E5%83%8F%E5%93%B2%E5%AD%A6%E5%AE%B6%E4%B8%80%E6%A0%B7%E7%94%9F%E6%B4%BB/" style="font-size: 15px;">像哲学家一样生活</a> <a href="/tag/%E6%96%AF%E5%A4%9A%E8%91%9B%E4%B8%BB%E4%B9%89/" style="font-size: 15px;">斯多葛主义</a> <a href="/tag/%E6%95%8F%E6%8D%B7%E6%95%99%E7%BB%83/" style="font-size: 15px;">敏捷教练</a> <a href="/tag/%E5%BD%93%E4%B8%8B/" style="font-size: 15px;">当下</a> <a href="/tag/%E5%B0%BD%E4%BA%BA%E4%BA%8B/" style="font-size: 15px;">尽人事</a> <a href="/tag/%E5%90%AC%E5%A4%A9%E5%91%BD/" style="font-size: 15px;">听天命</a> <a href="/tag/%E6%B4%BB%E7%9D%80/" style="font-size: 15px;">活着</a> <a href="/tag/%E5%BC%A0%E8%89%BA%E8%B0%8B/" style="font-size: 15px;">张艺谋</a> <a href="/tag/%E7%89%A9%E6%9D%A5%E9%A1%BA%E5%BA%94/" style="font-size: 15px;">物来顺应</a> <a href="/tag/%E7%AB%8B%E5%BF%97/" style="font-size: 15px;">立志</a> <a href="/tag/%E9%98%BF%E5%BE%B7%E5%8B%92/" style="font-size: 15px;">阿德勒</a> <a href="/tag/%E4%B8%AA%E4%BD%93%E5%BF%83%E7%90%86%E5%AD%A6/" style="font-size: 15px;">个体心理学</a> <a href="/tag/%E8%A2%AB%E8%AE%A8%E5%8E%8C%E7%9A%84%E5%8B%87%E6%B0%94/" style="font-size: 15px;">被讨厌的勇气</a> <a href="/tag/%E6%9C%B1%E7%86%B9/" style="font-size: 15px;">朱熹</a> <a href="/tag/%E5%AD%A3%E8%B0%A6%E5%85%88%E7%94%9F/" style="font-size: 15px;">季谦先生</a> <a href="/tag/%E5%A4%A9%E5%91%BD/" style="font-size: 15px;">天命</a> <a href="/tag/%E5%B0%8F%E7%8B%97%E9%92%B1%E9%92%B1/" style="font-size: 15px;">小狗钱钱</a> <a href="/tag/%E7%90%86%E8%B4%A2/" style="font-size: 15px;">理财</a> <a href="/tag/%E6%8A%95%E8%B5%84/" style="font-size: 15px;">投资</a> <a href="/tag/%E8%8A%92%E6%A0%BC/" style="font-size: 15px;">芒格</a> <a href="/tag/%E9%87%8D%E6%9E%84/" style="font-size: 15px;">重构</a> <a href="/tag/AI/" style="font-size: 15px;">AI</a> <a href="/tag/%E5%9B%BE%E7%81%B5/" style="font-size: 15px;">图灵</a> <a href="/tag/%E8%AE%BA%E8%AF%AD%E5%85%B1%E8%AF%BB/" style="font-size: 15px;">论语共读</a> <a href="/tag/%E8%AE%BA%E8%AF%AD%E6%9C%AD%E8%AE%B0/" style="font-size: 15px;">论语札记</a> <a href="/tag/%E4%B8%AD%E5%B1%B1%E5%85%AC%E5%9B%AD/" style="font-size: 15px;">中山公园</a> <a href="/tag/%E6%8E%A7%E7%B3%96%E9%9D%A9%E5%91%BD/" style="font-size: 15px;">控糖革命</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2024/08/27/%E9%80%83%E9%81%BF%E8%99%BD%E5%8F%AF%E8%80%BB%E4%BD%86%E6%9C%89%E7%94%A8/">逃避虽可耻但有用</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/08/23/%E6%88%91%E7%9A%84%E6%8E%A7%E7%B3%96%E5%B0%8F%E7%AA%8D%E9%97%A8/">我的控糖小窍门</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/08/22/%E3%80%8A%E8%AE%BA%E8%AF%AD%E3%80%8B%E6%9C%AD%E8%AE%B09/">《论语》札记9 | 学而篇 第十六章</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/08/15/%E3%80%8A%E8%AE%BA%E8%AF%AD%E3%80%8B%E6%9C%AD%E8%AE%B08/">《论语》札记8 | 学而篇 第十五章</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/08/09/%E3%80%8A%E8%AE%BA%E8%AF%AD%E3%80%8B%E5%85%B1%E8%AF%BB%EF%BC%8C%E6%AC%A2%E8%BF%8E%E5%8A%A0%E5%85%A5/">《论语》共读，欢迎加入</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/08/08/%E3%80%8A%E8%AE%BA%E8%AF%AD%E3%80%8B%E6%9C%AD%E8%AE%B07/">《论语》札记7 | 学而篇 第十四章</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/08/07/%E4%B8%AD%E5%B9%B4%E4%BA%BA%EF%BC%8C%E8%AF%B7%E6%8E%A7%E5%88%B6%E5%A5%BD%E8%87%AA%E5%B7%B1%E7%9A%84%E8%A1%80%E7%B3%96/">中年人，请控制好自己的血糖</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/08/01/%E3%80%8A%E8%AE%BA%E8%AF%AD%E3%80%8B%E6%9C%AD%E8%AE%B06/">《论语》札记6 | 学而篇 第八章</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/07/25/%E3%80%8A%E8%AE%BA%E8%AF%AD%E3%80%8B%E6%9C%AD%E8%AE%B05/">《论语》札记5 | 学而篇 第六章</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/07/18/%E3%80%8A%E8%AE%BA%E8%AF%AD%E3%80%8B%E6%9C%AD%E8%AE%B04/">《论语》札记4 | 学而篇 第五章</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 <a href="/." rel="nofollow">筒中窥猫.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="复制成功！"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>